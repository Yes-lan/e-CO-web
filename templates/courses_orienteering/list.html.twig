{% extends 'base.html.twig' %}

{% block title %}{{ 'parcours.page_title'|trans }}{% endblock %}

{% block stylesheets %}
{% endblock %}

{% block body %}
<div class="parcours-page">
    <div class="parcours-header">
        <h1>{{ 'parcours.title'|trans }}</h1>
        <div class="parcours-header-actions">
            <a class="btn btn-primary" id="newParcoursBtn" href="{{ path('app_parcours_edit', {id: 0}) }}"
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="white" stroke-width="2"/>
                    <path d="M12 8v8M8 12h8" stroke="white" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span id="newParcoursBtnText">{{ "parcours.new_parcours"|trans }}</span>
            </a>
        </div>
    </div>

    <div class="course-grid" id="courseList">
        {% if courses|length > 0 %}
            {% for course in courses %}
                {% include 'courses_orienteering/tiles/course.html.twig' with { 'course': course } %}
            {% endfor %}
        {% endif %}
    </div>
</div>


{% block javascripts %}
    
    
    <!-- Load libraries from local assets (no CDN needed) -->
    <script src="{{ asset('assets/js/qrcode.min.js') }}" onload="window.qrCodeLibraryLoaded = true; console.log('QRCode library loaded from local assets');"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" data-turbo-track="reload" async onload="window.jspdfLibraryLoaded = true; console.log('jsPDF library loaded');"></script>
{% endblock %}

{% endblock %}
