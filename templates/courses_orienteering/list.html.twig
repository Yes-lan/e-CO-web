{% extends 'base.html.twig' %}

{% block title %}{{ 'parcours.page_title'|trans }}{% endblock %}

{% block stylesheets %}
{% endblock %}

{% block body %}
<div class="parcours-page">
    <div class="parcours-header">
        <h1>{{ 'parcours.title'|trans }}</h1>
        <div class="parcours-header-actions">
            <div class="search-box">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="11" cy="11" r="8" stroke="#666" stroke-width="2"/>
                    <path d="M21 21l-4.35-4.35" stroke="#666" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <input type="text" id="searchInput">
            </div>
            <button class="btn btn-primary" id="newParcoursBtn" onclick="window.location.href='{{ path('app_parcours_create') }}'"
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="white" stroke-width="2"/>
                    <path d="M12 8v8M8 12h8" stroke="white" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span id="newParcoursBtnText">{{ "New Course"|trans }}</span>
            </button>
        </div>
    </div>

    <div class="course-grid" id="courseList">
        {% if courses|length > 0 %}
            {% for course in courses %}
                {% include 'courses_orienteering/tiles/course.html.twig' with { 'course': course } %}
            {% endfor %}
        {% endif %}
    </div>
</div>


{% block javascripts %}
    
    
    <!-- Load libraries from local assets (no CDN needed) -->
    <script src="{{ asset('assets/js/qrcode.min.js') }}" onload="window.qrCodeLibraryLoaded = true; console.log('QRCode library loaded from local assets');"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" data-turbo-track="reload" async onload="window.jspdfLibraryLoaded = true; console.log('jsPDF library loaded');"></script>
{% endblock %}

{% endblock %}
